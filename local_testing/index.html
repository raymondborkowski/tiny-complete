<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>tiny-complete demo</title>
        <script src="../index.js"></script>
        <style>
            .autocomplete {
                position: relative;
                display: inline-block;
            }
            input {
                border: 1px solid transparent;
                background-color: #fff;
                padding: 10px;
                font-size: 16px;
                width: 25%;
            }
            #autocomplete-items-container {
                position: absolute;
                border: 1px solid #d4d4d4;
                border-bottom: none;
                border-top: none;
                z-index: 99;
            }
            #autocomplete-items-container option {
                padding: 10px;
                cursor: pointer;
                background-color: #fff;
                border-bottom: 1px solid #d4d4d4;
            }
            #autocomplete-items-container option:hover {
                background-color: red;
            }
        </style>
    </head>
    <body>
        <h1>tiny-complete demo page</h1>

        <p>Type:</p>
        <div class="type-complete">
            <input id="jokes" type="text" name="jokes" placeholder="Enter your joke term">
        </div>
        <div class="type-complete">
            <input id="jokes2" type="text" name="jokes" placeholder="Enter your joke term2">
        </div>
        <script>
            var TC = new TinyComplete({
                id: 'jokes',
                defaultVals: ['ray','hi','detroit','NYC','NYC'],
                onChange: function(tinyCompareObject) {
                    if (tinyCompareObject.query.length > 2 && tinyCompareObject.defaultVals.length < 5) {
                        TC.request('https://a.intentmedia.net/adServer/airports?q=' + tinyCompareObject.query, function(response) {
                            TC.masterList = TC.masterList.concat(JSON.parse(response).results.map(function(record) { return record.value }));
                        });
                    }
                },
                maxResults: 15,
            });

            var TC2 = new TinyComplete({
                id: 'jokes2',
                defaultVals: [{key: 1, val: 'ray'}, {key: 1, val: 'hi'}, {key: 3, val: 'detroit'}, {key: 4, val: 'NYC'}, {key: 5, val: 'NYC'}],
                onChange: function(tinyCompareObject) {
                    if (tinyCompareObject.query.length > 2 && Object.keys(tinyCompareObject.defaultVals).length < 5) {
                        TC2.request('https://a.intentmedia.net/adServer/airports?q=' + tinyCompareObject.query, function(response) {
                            var fetchedObj = JSON.parse(response).results.map(function(record) { return {key: record.key, val: record.value} });
                            Object.keys(fetchedObj).forEach(function(key) { TC2.masterList[key] = fetchedObj[key]; });
                        });
                    }
                },
                maxResults: 15,
            });
        </script>
    </body>
</html>